<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SekAI - Multilingual Smart Chatbot</title>
<style>
  /* --- Reset and base --- */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #4b6cb7, #182848);
    color: #eee;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }
  header {
    background: rgba(30, 50, 80, 0.9);
    padding: 15px 30px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
  }
  header h1 {
    font-weight: 700;
    font-size: 1.6rem;
    color: #60a5fa;
    letter-spacing: 1.2px;
    user-select: none;
  }
  #controls {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  select, button {
    background: #2c3e50;
    border: none;
    color: #eee;
    padding: 8px 14px;
    font-size: 1rem;
    border-radius: 6px;
    cursor: pointer;
    user-select: none;
    transition: background 0.3s ease;
  }
  select:focus, button:focus {
    outline: 2px solid #60a5fa;
  }
  button:hover {
    background: #4a6aa1;
  }
  main {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    padding: 20px 30px;
    background: rgba(30, 40, 60, 0.7);
    overflow: hidden;
  }
  #chatWindow {
    flex-grow: 1;
    overflow-y: auto;
    padding-right: 10px;
    border-radius: 8px;
    background: #243b55;
    box-shadow: inset 0 0 20px #1a2a43;
  }
  .message {
    max-width: 70%;
    margin: 10px 0;
    padding: 12px 18px;
    border-radius: 18px;
    line-height: 1.4;
    font-size: 1rem;
  }
  .message.bot {
    background: #2e86de;
    align-self: flex-start;
    border-bottom-left-radius: 0;
  }
  .message.user {
    background: #1abc9c;
    align-self: flex-end;
    border-bottom-right-radius: 0;
  }
  form#inputArea {
    display: flex;
    gap: 12px;
    margin-top: 15px;
  }
  input#userInput {
    flex-grow: 1;
    padding: 12px 16px;
    font-size: 1rem;
    border-radius: 24px;
    border: none;
    outline: none;
  }
  button#sendBtn {
    padding: 0 20px;
    border-radius: 24px;
    background: #60a5fa;
    color: #182848;
    font-weight: 700;
    border: none;
    cursor: pointer;
    user-select: none;
    transition: background 0.3s ease;
  }
  button#sendBtn:hover:not(:disabled) {
    background: #3b82f6;
  }
  button#sendBtn:disabled {
    background: #a5b4fc;
    cursor: not-allowed;
  }
  /* Scrollbar */
  #chatWindow::-webkit-scrollbar {
    width: 8px;
  }
  #chatWindow::-webkit-scrollbar-thumb {
    background: #3b82f6;
    border-radius: 4px;
  }

  /* Responsive */
  @media (max-width: 600px) {
    header h1 {
      font-size: 1.3rem;
    }
    .message {
      max-width: 90%;
      font-size: 0.9rem;
    }
  }
</style>
</head>
<body>
<header>
  <h1>SekAI ü§ñ</h1>
  <div id="controls">
    <select id="languageSelect" aria-label="Select chat language">
      <option value="auto" selected>Auto Detect</option>
      <option value="en">English</option>
      <option value="ar">Arabic (ÿßŸÑÿπÿ±ÿ®Ÿäÿ©)</option>
      <option value="fr">French (Fran√ßais)</option>
      <option value="es">Spanish (Espa√±ol)</option>
      <option value="de">German (Deutsch)</option>
      <option value="zh">Chinese (‰∏≠Êñá)</option>
      <option value="ru">Russian (–†—É—Å—Å–∫–∏–π)</option>
      <option value="hi">Hindi (‡§π‡§ø‡§®‡•ç‡§¶‡•Ä)</option>
    </select>
    <button id="toggleVoiceBtn" aria-pressed="false" aria-label="Toggle voice synthesis">üîá Voice OFF</button>
    <button id="startVoiceInput" aria-label="Start voice input">üé§ Talk</button>
  </div>
</header>
<main>
  <div id="chatWindow" role="log" aria-live="polite" aria-relevant="additions"></div>
  <form id="inputArea" aria-label="Chat input form">
    <input
      type="text"
      id="userInput"
      placeholder="Type your message here..."
      autocomplete="off"
      aria-required="true"
      aria-label="Chat input"
      spellcheck="false"
    />
    <button type="submit" id="sendBtn" disabled>Send</button>
  </form>
</main>

<script>
  // Variables
  const chatWindow = document.getElementById('chatWindow');
  const inputArea = document.getElementById('inputArea');
  const userInput = document.getElementById('userInput');
  const sendBtn = document.getElementById('sendBtn');
  const languageSelect = document.getElementById('languageSelect');
  const toggleVoiceBtn = document.getElementById('toggleVoiceBtn');
  const startVoiceInputBtn = document.getElementById('startVoiceInput');

  let voiceEnabled = false;

  // Enable send button when input not empty
  userInput.addEventListener('input', () => {
    sendBtn.disabled = userInput.value.trim() === '';
  });

  // Knowledge base with multilingual answers
  const knowledgeBase = {
    greeting: {
      en: "Hello! I'm SekAI, your smart multilingual chatbot. How can I assist you today?",
      ar: "ŸÖÿ±ÿ≠ÿ®ÿßŸã! ÿ£ŸÜÿß SekAIÿå ÿ®Ÿàÿ™ ÿßŸÑÿØÿ±ÿØÿ¥ÿ© ÿßŸÑÿ∞ŸÉŸä ŸÖÿ™ÿπÿØÿØ ÿßŸÑŸÑÿ∫ÿßÿ™. ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü",
      fr: "Bonjour! Je suis SekAI, votre chatbot multilingue intelligent. Comment puis-je vous aider aujourd'hui?",
      es: "¬°Hola! Soy SekAI, tu chatbot multiling√ºe inteligente. ¬øC√≥mo puedo ayudarte hoy?",
      de: "Hallo! Ich bin SekAI, dein smarter mehrsprachiger Chatbot. Wie kann ich dir heute helfen?",
      zh: "‰Ω†Â•ΩÔºÅÊàëÊòØSekAIÔºå‰Ω†ÁöÑÂ§öËØ≠Ë®ÄÊô∫ËÉΩËÅäÂ§©Êú∫Âô®‰∫∫„ÄÇ‰ªäÂ§©ÊàëËÉΩÂ∏Æ‰Ω†‰ªÄ‰πàÔºü",
      ru: "–ü—Ä–∏–≤–µ—Ç! –Ø SekAI, —Ç–≤–æ–π —É–º–Ω—ã–π –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–π —á–∞—Ç–±–æ—Ç. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?",
      hi: "‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç SekAI ‡§π‡•Ç‡§Å, ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§¨‡§π‡•Å‡§≠‡§æ‡§∑‡•Ä ‡§ö‡•à‡§ü‡§¨‡•â‡§ü‡•§ ‡§Ü‡§ú ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•à‡§∏‡•á ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å?"
    },
    who_is_salmane: {
      en: "Salmane ELKADDANI is the visionary developer and owner of SekAI chatbot, dedicated to creating smart and user-friendly AI solutions.",
      ar: "ÿ≥ŸÑŸÖÿßŸÜ ÿßŸÑŸÇŸéÿØŸëÿßŸÜŸä ŸáŸà ÿßŸÑŸÖÿ∑Ÿàÿ± ŸàÿßŸÑÿ±ÿ¶Ÿäÿ≥ ÿßŸÑÿ™ŸÜŸÅŸäÿ∞Ÿä ŸÑÿ®Ÿàÿ™ SekAIÿå ŸÖŸÉÿ±Ÿëÿ≥ ŸÑÿ•ŸÜÿ¥ÿßÿ° ÿ≠ŸÑŸàŸÑ ÿ∞ŸÉÿßÿ° ÿßÿµÿ∑ŸÜÿßÿπŸä ÿ∞ŸÉŸäÿ© Ÿàÿ≥ŸáŸÑÿ© ÿßŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ.",
      fr: "Salmane ELKADDANI est le d√©veloppeur visionnaire et propri√©taire du chatbot SekAI, d√©di√© √† la cr√©ation de solutions d'IA intelligentes et conviviales.",
      es: "Salmane ELKADDANI es el desarrollador visionario y propietario del chatbot SekAI, dedicado a crear soluciones de IA inteligentes y f√°ciles de usar.",
      de: "Salmane ELKADDANI ist der vision√§re Entwickler und Eigent√ºmer des SekAI-Chatbots, der sich der Entwicklung intelligenter und benutzerfreundlicher KI-L√∂sungen widmet.",
      zh: "Salmane ELKADDANI ÊòØ SekAI Êú∫Âô®‰∫∫ËÉåÂêéÁöÑÂºÄÂèëËÄÖÂíåÂàõÂßã‰∫∫ÔºåËá¥Âäõ‰∫éÊâìÈÄ†Êô∫ËÉΩ‰∏îÊòìÁî®ÁöÑ AI Ëß£ÂÜ≥ÊñπÊ°à„ÄÇ",
      ru: "Salmane ELKADDANI ‚Äî –≤–∏–∑–∏–æ–Ω–µ—Ä –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —á–∞—Ç–±–æ—Ç–∞ SekAI, –ø–æ—Å–≤—è—Ç–∏–≤—à–∏–π —Å–µ–±—è —Å–æ–∑–¥–∞–Ω–∏—é —É–º–Ω—ã—Ö –∏ —É–¥–æ–±–Ω—ã—Ö AI —Ä–µ—à–µ–Ω–∏–π.",
      hi: "Salmane ELKADDANI SekAI ‡§ö‡•à‡§ü‡§¨‡•ã‡§ü ‡§ï‡•á ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§µ‡§æ‡§® ‡§°‡•á‡§µ‡§≤‡§™‡§∞ ‡§î‡§∞ ‡§Æ‡§æ‡§≤‡§ø‡§ï ‡§π‡•à‡§Ç, ‡§ú‡•ã ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§æ‡§® ‡§î‡§∞ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ-‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤ AI ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Æ‡§∞‡•ç‡§™‡§ø‡§§ ‡§π‡•à‡§Ç‡•§"
    },
    how_to_use: {
      en: "You can ask me questions in your language, and I will reply accordingly. Try asking about Salmane ELKADDANI or general greetings.",
      ar: "ŸäŸÖŸÉŸÜŸÉ ÿ≥ÿ§ÿßŸÑŸä ÿ®ÿ£Ÿä ŸÑÿ∫ÿ© Ÿàÿ≥ÿ£ÿ¨Ÿäÿ®ŸÉ ÿ≠ÿ≥ÿ® ÿßŸÑŸÑÿ∫ÿ©. ÿ¨ÿ±ÿ® ÿ£ŸÜ ÿ™ÿ≥ÿ£ŸÑ ÿπŸÜ ÿ≥ŸÑŸÖÿßŸÜ ÿßŸÑŸÇŸéÿØŸëÿßŸÜŸä ÿ£Ÿà ÿ™ÿ≠Ÿäÿßÿ™ ÿπÿßŸÖÿ©.",
      fr: "Vous pouvez me poser des questions dans votre langue, et je r√©pondrai en cons√©quence. Essayez de demander √† propos de Salmane ELKADDANI ou des salutations g√©n√©rales.",
      es: "Puedes hacerme preguntas en tu idioma y responder√© en consecuencia. Prueba a preguntar sobre Salmane ELKADDANI o saludos generales.",
      de: "Du kannst mir Fragen in deiner Sprache stellen, und ich antworte entsprechend. Versuche, nach Salmane ELKADDANI oder allgemeinen Gr√º√üen zu fragen.",
      zh: "‰Ω†ÂèØ‰ª•Áî®‰Ω†ÁöÑËØ≠Ë®ÄÈóÆÊàëÈóÆÈ¢òÔºåÊàë‰ºöÁõ∏Â∫îÂõûÁ≠î„ÄÇËØïËØïÈóÆÂÖ≥‰∫éSalmane ELKADDANIÊàñ‰∏ÄËà¨ÈóÆÂÄô„ÄÇ",
      ru: "–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞–≤–∞—Ç—å –º–Ω–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–≤–æ–µ–º —è–∑—ã–∫–µ, –∏ —è –æ—Ç–≤–µ—á—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å –æ Salmane ELKADDANI –∏–ª–∏ –æ–±—â–∏—Ö –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è—Ö.",
      hi: "‡§Ü‡§™ ‡§Æ‡•Å‡§ù‡§∏‡•á ‡§Ö‡§™‡§®‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•Ç‡§õ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§î‡§∞ ‡§Æ‡•à‡§Ç ‡§â‡§∏‡•Ä ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§ú‡§µ‡§æ‡§¨ ‡§¶‡•Ç‡§Ç‡§ó‡§æ‡•§ Salmane ELKADDANI ‡§Ø‡§æ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Ö‡§≠‡§ø‡§µ‡§æ‡§¶‡§® ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§"
    },
    programming_languages: {
      en: "I can talk about programming languages like JavaScript, Python, C++, and more. Ask me anything related!",
      ar: "ŸäŸÖŸÉŸÜŸÜŸä ÿßŸÑÿ™ÿ≠ÿØÿ´ ÿπŸÜ ŸÑÿ∫ÿßÿ™ ÿßŸÑÿ®ÿ±ŸÖÿ¨ÿ© ŸÖÿ´ŸÑ ÿ¨ÿßŸÅÿßÿ≥ŸÉÿ±Ÿäÿ®ÿ™ÿå ÿ®ÿßŸäÿ´ŸàŸÜÿå ÿ≥Ÿä ÿ®ŸÑÿ≥ ÿ®ŸÑÿ≥ÿå Ÿàÿ£ŸÉÿ´ÿ±. ÿßÿ≥ÿ£ŸÑŸÜŸä ÿ£Ÿä ÿ¥Ÿäÿ° ŸÖÿ™ÿπŸÑŸÇ!",
      fr: "Je peux parler des langages de programmation comme JavaScript, Python, C++, et plus. Demandez-moi n'importe quoi!",
      es: "Puedo hablar sobre lenguajes de programaci√≥n como JavaScript, Python, C++ y m√°s. ¬°Preg√∫ntame cualquier cosa relacionada!",
      de: "Ich kann √ºber Programmiersprachen wie JavaScript, Python, C++ und mehr sprechen. Frag mich alles dazu!",
      zh: "ÊàëÂèØ‰ª•Ë∞àËÆ∫JavaScript„ÄÅPython„ÄÅC++Á≠âÁºñÁ®ãËØ≠Ë®Ä„ÄÇÈöèÊó∂ÈóÆÊàëÁõ∏ÂÖ≥ÁöÑÈóÆÈ¢òÔºÅ",
      ru: "–Ø –º–æ–≥—É –≥–æ–≤–æ—Ä–∏—Ç—å –æ —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Ç–∞–∫–∏—Ö –∫–∞–∫ JavaScript, Python, C++ –∏ –¥—Ä—É–≥–∏—Ö. –°–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ —á—Ç–æ —É–≥–æ–¥–Ω–æ!",
      hi: "‡§Æ‡•à‡§Ç JavaScript, Python, C++, ‡§î‡§∞ ‡§Ö‡§ß‡§ø‡§ï ‡§ú‡•à‡§∏‡•Ä ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§ø‡§Ç‡§ó ‡§≠‡§æ‡§∑‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§¨‡§æ‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å‡•§ ‡§Æ‡•Å‡§ù‡§∏‡•á ‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§™‡•Ç‡§õ‡•á‡§Ç!"
    },
    fun_fact: {
      en: "Did you know? SekAI means 'world' or 'universe' in Japanese, symbolizing the global reach of our chatbot.",
      ar: "ŸáŸÑ ÿ™ÿπŸÑŸÖÿü SekAI ÿ™ÿπŸÜŸä 'ÿßŸÑÿπÿßŸÑŸÖ' ÿ£Ÿà 'ÿßŸÑŸÉŸàŸÜ' ÿ®ÿßŸÑŸäÿßÿ®ÿßŸÜŸäÿ©ÿå ŸÖŸÖÿß Ÿäÿ±ŸÖÿ≤ ÿ•ŸÑŸâ ÿßŸÑÿßŸÜÿ™ÿ¥ÿßÿ± ÿßŸÑÿπÿßŸÑŸÖŸä ŸÑÿ®Ÿàÿ™ŸÜÿß.",
      fr: "Le saviez-vous? SekAI signifie 'monde' ou 'univers' en japonais, symbolisant la port√©e mondiale de notre chatbot.",
      es: "¬øSab√≠as? SekAI significa 'mundo' o 'universo' en japon√©s, simbolizando el alcance global de nuestro chatbot.",
      de: "Wusstest du? SekAI bedeutet auf Japanisch 'Welt' oder 'Universum' und symbolisiert die globale Reichweite unseres Chatbots.",
      zh: "‰Ω†Áü•ÈÅìÂêóÔºüSekAI Âú®Êó•ËØ≠‰∏≠ÊÑè‰∏∫‚Äú‰∏ñÁïå‚ÄùÊàñ‚ÄúÂÆáÂÆô‚ÄùÔºåË±°ÂæÅÁùÄÊàë‰ª¨ËÅäÂ§©Êú∫Âô®‰∫∫ÁöÑÂÖ®ÁêÉÂΩ±ÂìçÂäõ„ÄÇ",
      ru: "–ó–Ω–∞–µ—Ç–µ –ª–∏ –≤—ã? SekAI –æ–∑–Ω–∞—á–∞–µ—Ç '–º–∏—Ä' –∏–ª–∏ '–≤—Å–µ–ª–µ–Ω–Ω–∞—è' –Ω–∞ —è–ø–æ–Ω—Å–∫–æ–º, —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ—Ö–≤–∞—Ç –Ω–∞—à–µ–≥–æ —á–∞—Ç–±–æ—Ç–∞.",
      hi: "‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§ú‡§æ‡§®‡§§‡•á ‡§π‡•à‡§Ç? SekAI ‡§ú‡§æ‡§™‡§æ‡§®‡•Ä ‡§Æ‡•á‡§Ç '‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ' ‡§Ø‡§æ '‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§æ‡§Ç‡§°' ‡§ï‡§æ ‡§Æ‡§§‡§≤‡§¨ ‡§π‡•à, ‡§ú‡•ã ‡§π‡§Æ‡§æ‡§∞‡•á ‡§ö‡•à‡§ü‡§¨‡•â‡§ü ‡§ï‡•Ä ‡§µ‡•à‡§∂‡•ç‡§µ‡§ø‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö ‡§ï‡•ã ‡§¶‡§∞‡•ç‡§∂‡§æ‡§§‡§æ ‡§π‡•à‡•§"
    }
  };

  // Function: Detect language from text (basic, checks keywords)
  function detectLanguage(text) {
    const lowered = text.toLowerCase();
    if (/[ÿ°-Ÿä]/.test(lowered)) return 'ar';
    if (/[–∞-—è—ë]/.test(lowered)) return 'ru';
    if (/[√†√¢√ß√©√®√™√´√Æ√Ø√¥√ª√π√º√ø√±√¶≈ì]/.test(lowered)) return 'fr'; // simplistic French chars
    if (/[√°√©√≠√≥√∫√±]/.test(lowered)) return 'es';
    if (/[√§√∂√º√ü]/.test(lowered)) return 'de';
    if (/[‰Ω†Â•Ω]/.test(lowered)) return 'zh';
    if (/[‡§π-‡•Ø]/.test(lowered)) return 'hi';
    return 'en';
  }

  // Function: Find reply from knowledge base
  function getReply(input, lang) {
    input = input.toLowerCase().trim();

    // Greetings
    if (/^(hi|hello|hey|ŸÖÿ±ÿ≠ÿ®ÿß|bonjour|hola|hallo|‡§®‡§Æ‡§∏‡•ç‡§§‡•á|–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ|‰Ω†Â•Ω)/i.test(input)) {
      return knowledgeBase.greeting[lang] || knowledgeBase.greeting.en;
    }

    // Who is Salmane
    if (/who.*salmane|ŸÖŸÜ ŸáŸà ÿ≥ŸÑŸÖÿßŸÜ|qui est salmane|qui√©n es salmane|wer ist salmane|—Å–∞–ª–º–∞–Ω|‡§∏‡§æ‡§≤‡§Æ‡§æ‡§®‡•á/i.test(input)) {
      return knowledgeBase.who_is_salmane[lang] || knowledgeBase.who_is_salmane.en;
    }

    // How to use
    if (/how (are you|do you work)|ŸÉŸäŸÅ ÿ™ÿπŸÖŸÑ|comment √ßa marche|c√≥mo funciona|wie funktioniert/i.test(input)) {
      return knowledgeBase.how_to_use[lang] || knowledgeBase.how_to_use.en;
    }

    // Programming languages
    if (/programming languages?|ŸÑÿ∫ÿßÿ™ ÿßŸÑÿ®ÿ±ŸÖÿ¨ÿ©|langages de programmation|lenguajes de programaci√≥n|programmiersprachen/i.test(input)) {
      return knowledgeBase.programming_languages[lang] || knowledgeBase.programming_languages.en;
    }

    // Fun fact
    if (/fun fact|ŸÖÿπŸÑŸàŸÖÿ© ŸÖŸÖÿ™ÿπÿ©|fait amusant|dato curioso|spa√üige Tatsache/i.test(input)) {
      return knowledgeBase.fun_fact[lang] || knowledgeBase.fun_fact.en;
    }

    // How are you?
    if (/how are you|ŸÉŸäŸÅ ÿ≠ÿßŸÑŸÉ|comment √ßa va|c√≥mo est√°s|wie geht's|‰Ω†Â•ΩÂêó|–∫–∞–∫ –¥–µ–ª–∞|‡§ï‡•à‡§∏‡•á ‡§π‡•ã/i.test(input)) {
      const answers = {
        en: ["I'm good, thank you! How about you?", "Doing great! How can I help?"],
        ar: ["ÿ£ŸÜÿß ÿ®ÿÆŸäÿ±ÿå ÿ¥ŸÉÿ±ÿßŸã! ŸÖÿßÿ∞ÿß ÿπŸÜŸÉÿü", "ÿ£ŸÜÿß ÿ¨ŸäÿØÿå ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©ÿü"],
        fr: ["Je vais bien, merci! Et toi?", "√áa va bien! Comment puis-je aider?"],
        es: ["Estoy bien, ¬°gracias! ¬øY t√∫?", "¬°Muy bien! ¬øEn qu√© puedo ayudar?"],
        de: ["Mir geht's gut, danke! Und dir?", "Alles bestens! Wie kann ich helfen?"],
        zh: ["ÊàëÂæàÂ•ΩÔºåË∞¢Ë∞¢ÔºÅ‰Ω†Âë¢Ôºü", "ÂæàÂ•ΩÔºÅÊàëËÉΩÂ∏Æ‰ªÄ‰πàÂøôÔºü"],
        ru: ["–Ø –≤ –ø–æ—Ä—è–¥–∫–µ, —Å–ø–∞—Å–∏–±–æ! –ê —Ç—ã?", "–û—Ç–ª–∏—á–Ω–æ! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"],
        hi: ["‡§Æ‡•à‡§Ç ‡§†‡•Ä‡§ï ‡§π‡•Ç‡§Å, ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! ‡§î‡§∞ ‡§Ü‡§™?", "‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ö‡•ç‡§õ‡§æ! ‡§Æ‡•à‡§Ç ‡§ï‡•à‡§∏‡•á ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å?"]
      };
      const ans = answers[lang] || answers.en;
      return ans[Math.floor(Math.random() * ans.length)];
    }

    // Default fallback
    return {
      en: "Sorry, I didn't understand that. Can you please rephrase?",
      ar: "ÿπÿ∞ÿ±ÿßŸãÿå ŸÑŸÖ ÿ£ŸÅŸáŸÖ ÿ∞ŸÑŸÉ. ŸáŸÑ ŸäŸÖŸÉŸÜŸÉ ÿ•ÿπÿßÿØÿ© ÿßŸÑÿµŸäÿßÿ∫ÿ©ÿü",
      fr: "D√©sol√©, je n'ai pas compris. Pouvez-vous reformuler?",
      es: "Lo siento, no entend√≠ eso. ¬øPuedes reformular?",
      de: "Entschuldigung, das habe ich nicht verstanden. K√∂nnen Sie das bitte anders formulieren?",
      zh: "Êä±Ê≠âÔºåÊàë‰∏çÊòéÁôΩÊÇ®ÁöÑÊÑèÊÄù„ÄÇÊÇ®ËÉΩÊç¢‰∏ÄÁßçËØ¥Ê≥ïÂêóÔºü",
      ru: "–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –ø–æ–Ω—è–ª. –ú–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å?",
      hi: "‡§ï‡•ç‡§∑‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç, ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù ‡§®‡§π‡•Ä‡§Ç ‡§™‡§æ‡§Ø‡§æ‡•§ ‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§ï‡§π ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç?"
    }[lang] || "Sorry, I didn't understand that. Can you please rephrase?";
  }

  // Function: Add message to chat
  function addMessage(text, sender = 'bot') {
    const msgDiv = document.createElement('div');
    msgDiv.className = 'message ' + sender;
    msgDiv.textContent = text;
    chatWindow.appendChild(msgDiv);
    chatWindow.scrollTop = chatWindow.scrollHeight;
  }

  // Voice synthesis function
  function speak(text, lang) {
    if (!voiceEnabled) return;
    if (!('speechSynthesis' in window)) return;

    window.speechSynthesis.cancel();

    const utterance = new SpeechSynthesisUtterance(text);
    // Map languages to voice lang tags (simplified)
    const langMap = {
      ar: 'ar-SA',
      en: 'en-US',
      fr: 'fr-FR',
      es: 'es-ES',
      de: 'de-DE',
      zh: 'zh-CN',
      ru: 'ru-RU',
      hi: 'hi-IN'
    };
    utterance.lang = langMap[lang] || 'en-US';

    // Optional: choose a voice matching lang
    const voices = window.speechSynthesis.getVoices();
    const voice = voices.find(v => v.lang.startsWith(utterance.lang.split('-')[0]));
    if (voice) utterance.voice = voice;

    window.speechSynthesis.speak(utterance);
  }

  // Event: Submit message
  inputArea.addEventListener('submit', e => {
    e.preventDefault();
    const text = userInput.value.trim();
    if (!text) return;

    addMessage(text, 'user');

    // Detect language or use selected
    let lang = languageSelect.value === 'auto' ? detectLanguage(text) : languageSelect.value;

    const reply = getReply(text, lang);
    addMessage(reply, 'bot');
    speak(reply, lang);

    userInput.value = '';
  });

  // Initialize voices (some browsers require this)
  if ('speechSynthesis' in window) {
    window.speechSynthesis.onvoiceschanged = () => {};
  }

})();Hallo! Du kannst mir gern Fragen auf Deutsch oder einer anderen Sprache stellen. Wie kann ich dir heute helfen? üòä
